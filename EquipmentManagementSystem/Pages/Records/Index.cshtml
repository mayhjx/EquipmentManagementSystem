@page
@model EquipmentManagementSystem.Pages.Records.IndexModel
@{
}

@*<partial name="_StatusMessage" for="StatusMessage" />*@

<div class="card card-primary card-outline card-outline-tabs">
    <div class="card-header p-0 border-bottom-0">
        <div class="card-title">
            <ul class="nav nav-tabs">
                <li class="nav-usageRecord">
                    <a class="nav-link active" id="maintenance-record-tab" data-toggle="pill" href="#maintenance-record" role="tab" aria-controls="maintenance-record" aria-selected="true">
                        <h5 class="text-dark">维护记录</h5>
                    </a>
                </li>
                <li class="nav-usageRecord">
                    <a class="nav-link" id="usage-record-tab" data-toggle="pill" href="#usage-record" role="tab" aria-controls="usage-record" aria-selected="false">
                        <h5 class="text-dark">使用记录</h5>
                    </a>
                </li>
            </ul>
        </div>
        <div class="card-tools">
            <form id="search" class="form-inline float-left" method="post" asp-page-handler="Search">
                <label class="my-1 mr-2 ml-2" for="instrument" asp-for="@Model.Search.Instrument"></label>
                <select class="custom-select my-1 mr-2" id="instrumentId" asp-for="@Model.Search.Instrument">
                    @if (Model.Search.InstrumentSelectList.Count == 0)
                    {
                        <option value="">无仪器编号</option>
                    }
                    else
                    {
                        @foreach (var id in Model.Search.InstrumentSelectList)
                        {
                            <option value="@id">@id</option>
                        }
                    }
                </select>

                <label class="my-1 mr-2" for="date">月份</label>
                <input class="form-control my-1 mr-2" id="date" type="month" asp-for="Search.Date" style="width:165px;" />

                <button class="btn btn-outline-primary my-1 mr-2" asp-page-handler="Search">查询</button>
                <button type="button" class="btn btn-outline-primary my-1" onclick="createReport()">导出</button>
            </form>
        </div>
    </div>

    <div class="card-body pt-0">
        <div class="tab-content">
            @if (Model.Search.InstrumentSelectList.Count == 0)
            {
                <p>无仪器数据，请先在设备档案中新建</p>
            }
            else
            {
                @*维护记录*@
                int columnNumber = 31; // 固定显示31天
                int totalColSpan = 33;
                string InstrumentPlatform = Model.Platform;
                <div class="tab-pane fade table-responsive active show" id="maintenance-record" role="tabpanel" aria-labelledby="maintenance-record-tab">
                    <table id="maintenance-record">
                        <thead>
                            <tr class="title">
                                <td colspan="@totalColSpan">
                                    <h5>
                                        @(InstrumentPlatform == "LCMS" ? "液相色谱串联质谱联用仪维护记录表" :
                                            InstrumentPlatform == "GCMS" ? "气质联用仪维护记录表" :
                                            InstrumentPlatform == "UPLC" ? "超高效液相色谱仪维护记录表" : "_______________维护记录表")
                                    </h5>
                                    <h5>
                                        @(InstrumentPlatform == "LCMS" ? "LC-MS/MS Maintenance Form" :
                                            InstrumentPlatform == "GCMS" ? "GC-MS Maintenance Form" :
                                            InstrumentPlatform == "UPLC" ? "UHPLC Maintenance Form" : "_______________Maintenance Form")
                                    </h5>
                                </td>
                            </tr>
                            <tr class="head">
                                <td colspan="12" style="text-align:left;"> @Model.Search.Date.ToString(@"yyyy 年 \Year MM 月 \M\on\t\h")</td>
                                <td colspan="10" style="text-align:left;">仪器编号 No.：@(Model.Search.Instrument)</td>
                                <td colspan="11" style="text-align:right;">
                                    @(InstrumentPlatform == "LCMS" ? "表号 Form：KM-SOP0314.202.02" :
                                        InstrumentPlatform == "GCMS" ? "表号 Form：KM-SOP0314.201.02" :
                                        InstrumentPlatform == "UPLC" ? "表号 Form：KM-SOP0314.204.02" : "表号 Form：KM-SOP0314. _____ .02")
                                </td>
                            </tr>
                        </thead>
                        <tfoot>
                            <tr>
                                <td colspan="@totalColSpan" style="text-align:left;padding-left:10px;">
                                    备注 remark：Y，该工作日已完成该项维护； N，经评估该工作日无需进行该项维护。
                                </td>
                            </tr>
                            <tr>
                                <td colspan="@totalColSpan">使用回顾</td>
                            </tr>
                            <tr>
                                <td>评估意见<br />Comment</td>
                                <td colspan="@(totalColSpan - 19)"></td>
                                <td colspan="4">评估人/日期<br />Evaluator/Date</td>
                                <td colspan="5"></td>
                                <td colspan="4">审批人/日期<br />Approver/Date</td>
                                <td colspan="5"></td>
                            </tr>
                        </tfoot>
                        <tbody>
                            <tr>
                                <td></td>
                                <td>日期 Date</td>
                                @for (int i = 1; i <= columnNumber; i++)
                                {
                                    <td class="days" data-id="@Model.RecordsIdOfMonth[i-1]">@i</td>

                                }
                            </tr>
                            <tr>
                                <td class="left" rowspan="@(Model.DailyMaintenanceContent.Count+2)">
                                    日常维护<br />Daily
                                </td>
                            </tr>
                            @foreach (var content in Model.DailyMaintenanceContent)
                            {
                                <tr>
                                    <td class="maintenance-content">@content</td>
                                    @foreach (var yOrN in Model.DailyMaintenanceSituation[content])
                                    {
                                        <td>@yOrN</td>
                                    }
                                </tr>
                            }
                            <tr>
                                <td class="operator">操作者</td>
                                @foreach (var op in Model.DailyMaintenanceOperator)
                                {
                                    <td><p class="operator text-vertical">@op</p></td>
                                }
                            </tr>
                            <tr>
                                <td class="left" rowspan="@(Model.WeeklyMaintenanceContent.Count+2)">
                                    周维护<br />Weekly
                                </td>
                            </tr>
                            @{
                                // 周维护有4个，每个维护内容占用的colspan
                                var colSpanOfWeekly = new int[] { 7, 8, 8, 8 };
                            }
                            @foreach (var content in Model.WeeklyMaintenanceContent)
                            {
                                <tr>
                                    <td class="maintenance-content">@content</td>
                                    @for (int i = 0; i < colSpanOfWeekly.Length; i++)
                                    {
                                        var yOrN = Model.WeekyMaintenanceSituation[content][i];
                                        <td colspan="@colSpanOfWeekly[i]">@yOrN</td>
                                    }
                                </tr>
                            }
                            <tr>
                                <td class="operator">操作者</td>
                                @for (int i = 0; i < colSpanOfWeekly.Length; i++)
                                {
                                    var op = Model.WeeklyMaintenanceOperator[i];
                                    <td colspan="@colSpanOfWeekly[i]">@op</td>
                                }
                            </tr>
                            @{
                                var otherRowSpan = 1;
                                var rowOfTemporary = 1;
                                if (InstrumentPlatform == "LCMS")
                                {
                                    otherRowSpan = 7;
                                    rowOfTemporary = 3;
                                }
                                else if (InstrumentPlatform == "GCMS")
                                {
                                    otherRowSpan = 10;
                                    rowOfTemporary = 6;
                                }
                                else if (InstrumentPlatform == "UPLC")
                                {
                                    otherRowSpan = 12;
                                    rowOfTemporary = 8;
                                }
                            }
                            <tr>
                                <td class="left" rowspan="@otherRowSpan">
                                    其他<br />Others
                                </td>
                            </tr>
                            @foreach (var tem in Model.TemporaryMaintenanceRecord)
                            {
                                <tr>
                                    <td class="maintenance-content">临时维护<br />操作者/日期</td>
                                    <td colspan="@columnNumber">
                                        @tem
                                    </td>
                                </tr>
                            }
                            @for (int i = 1; i <= rowOfTemporary - Model.TemporaryMaintenanceRecord.Count; i++)
                            {
                                // 补充行
                                <tr>
                                    <td class="maintenance-content">临时维护<br />操作者/日期</td>
                                    <td colspan="@columnNumber"></td>
                                </tr>
                            }
                            <tr>
                                <td class="maintenance-content">月度维护<br />操作者/日期</td>
                                <td colspan="@columnNumber">@Model.MonthlyMaintenanceRecord</td>
                            </tr>
                            <tr>
                                <td class="maintenance-content">季度维护<br />操作者/日期</td>
                                <td colspan="@columnNumber">@Model.QuarterlyMaintenanceRecord</td>
                            </tr>
                            <tr>
                                <td class="maintenance-content">年度维护<br />操作者/日期</td>
                                <td colspan="@columnNumber">@Model.YearlyMaintenanceRecord</td>
                            </tr>
                        </tbody>
                    </table>

                    <style>
                        @@media print {
                            @@page {
                                size: A4 landscape;
                                margin: 2cm,2mm,3mm,2mm;
                            }

                            a {
                                display: none;
                            }

                            button {
                                display: none !important;
                            }

                            div.card-title, div.card-tools {
                                display: none;
                            }
                        }

                        @@media screen {
                            tr.title {
                                display: none;
                                border-bottom: 1px solid #FFF;
                            }

                            tfoot {
                                display: none;
                            }
                        }

                        table#maintenance-record {
                            table-layout: initial;
                            font-family: 'Times New Roman',sans-serif;
                        }

                        tr.title td {
                            border: 1px solid #FFF;
                        }

                        tr.head td {
                            border-top: 1px solid #FFF;
                            border-left: 1px solid #FFF;
                            border-right: 1px solid #FFF;
                        }

                        td.left {
                            width: 7%;
                            font-weight: bold;
                        }

                        td.maintenance-content, td.operator {
                            text-align: left;
                            text-overflow: ellipsis;
                            white-space: nowrap;
                            padding-left: 10px;
                            padding-right: 10px;
                        }

                        p.text-vertical {
                            margin: 2px auto;
                            width: 16px;
                            font-size: 18px;
                        }

                        td.operator {
                            font-weight: bold;
                        }

                        td.days {
                            width: 2.7%;
                            height: 40px;
                        }
                    </style>
                    <a asp-page="MaintenanceRecords/Create" asp-route-instrumentId="@Model.Search.Instrument">
                        <input type="button" class="btn btn-primary my-2" value="新建">
                    </a>
                    <audit-trail logs="Model.MaintenanceAuditTrailLogs" modal-id="maintenanceAuditTrailLog"></audit-trail>
                </div>

                @*使用记录*@
                <div class="tab-pane fade table-responsive" id="usage-record" role="tabpanel" aria-labelledby="usage-record-tab">
                    <h6>仪器编号：@Model.Search.Instrument</h6>
                    <table id="usage-record">
                        <thead class="text-nowrap">
                            <tr>
                                <th class="time">开始时间</th>
                                <th class="time">结束时间</th>
                                <th class="projectname">检测项目</th>
                                <th class="samplenumber">临床样数量</th>
                                <th class="batchnumber">Batch样品量</th>
                                <th class="vacuumdegree">真空度</th>
                                <th class="columntype">色谱柱/压力</th>
                                <th class="blank">Blank</th>
                                <th class="test">Test</th>
                                <th class="remark">备注</th>
                                <th class="operator">操作者</th>
                                <th class="button">&nbsp;</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var usageRecord in Model.UsageRecords)
                            {
                                @* view row *@
                                <tr class="view-row">
                                    <td class="time">@Html.DisplayFor(item => usageRecord.BeginTime)</td>
                                    <td class="time">@Html.DisplayFor(item => usageRecord.EndTime)</td>
                                    <td class="projectname">@Html.DisplayFor(item => usageRecord.ProjectName)</td>
                                    <td class="samplenumber">@Html.DisplayFor(item => usageRecord.SampleNumber)</td>
                                    <td class="batchnumber">
                                        @if (usageRecord.SystemOneBatchNumber != null && usageRecord.SystemTwoBatchNumber != null)
                                        {
                                            <text>S1：</text>
                                            @Html.DisplayFor(item => usageRecord.SystemOneBatchNumber)
                                            <br />
                                            <text>S2：</text>
                                            @Html.DisplayFor(item => usageRecord.SystemTwoBatchNumber)
                                        }
                                        else
                                        {
                                            @Html.DisplayFor(item => usageRecord.SystemOneBatchNumber)
                                        }
                                    </td>
                                    <td class="vacuumdegree">
                                        @if (usageRecord.LowVacuumDegree != null && usageRecord.HighVacuumDegree != null)
                                        {
                                            <text>低：</text>
                                            @Html.DisplayFor(item => usageRecord.LowVacuumDegree)<text>&nbsp;</text>
                                            @Html.DisplayFor(item => usageRecord.LowVacuumDegreeUnit)
                                            <br />
                                            <text>高：</text>
                                            @Html.DisplayFor(item => usageRecord.HighVacuumDegree)<text>&nbsp;</text>
                                            @Html.DisplayFor(item => usageRecord.HighVacuumDegreeUnit)
                                        }
                                        else if (usageRecord.LowVacuumDegree != null)
                                        {
                                            <text>低：</text>
                                            @Html.DisplayFor(item => usageRecord.LowVacuumDegree)
                                            @Html.DisplayFor(item => usageRecord.LowVacuumDegreeUnit)
                                        }
                                        else if (usageRecord.HighVacuumDegree != null)
                                        {
                                            <text>高：</text>
                                            @Html.DisplayFor(item => usageRecord.HighVacuumDegree)
                                            @Html.DisplayFor(item => usageRecord.HighVacuumDegreeUnit)
                                        }
                                    </td>
                                    <td class="columntype">
                                        @if (usageRecord.SystemOneColumnPressure != null && usageRecord.SystemTwoColumnPressure != null)
                                        {
                                            <text>S1：</text>
                                            @Html.DisplayFor(item => usageRecord.SystemOneColumnNumber)<text>&nbsp;</text>
                                            @Html.DisplayFor(item => usageRecord.SystemOneColumnPressure)<text>&nbsp;</text>
                                            @Html.DisplayFor(item => usageRecord.SystemOneColumnPressureUnit)
                                            <br />
                                            <text>S2：</text>
                                            @Html.DisplayFor(item => usageRecord.SystemTwoColumnNumber)<text>&nbsp;</text>
                                            @Html.DisplayFor(item => usageRecord.SystemTwoColumnPressure)<text>&nbsp;</text>
                                            @Html.DisplayFor(item => usageRecord.SystemTwoColumnPressureUnit)
                                        }
                                        else if (usageRecord.SystemOneColumnPressure != null)
                                        {
                                            @Html.DisplayFor(item => usageRecord.SystemOneColumnNumber)<text>&nbsp;</text>
                                            @Html.DisplayFor(item => usageRecord.SystemOneColumnPressure)<text>&nbsp;</text>
                                            @Html.DisplayFor(item => usageRecord.SystemOneColumnPressureUnit)
                                        }
                                        else if (usageRecord.SystemTwoColumnPressure != null)
                                        {
                                            @Html.DisplayFor(item => usageRecord.SystemTwoColumnNumber)<text>&nbsp;</text>
                                            @Html.DisplayFor(item => usageRecord.SystemTwoColumnPressure)<text>&nbsp;</text>
                                            @Html.DisplayFor(item => usageRecord.SystemTwoColumnPressureUnit)
                                        }
                                    </td>
                                    <td class="blank">@Html.DisplayFor(item => usageRecord.BlankSignal)</td>
                                    <td class="test">
                                        @if (usageRecord.SystemOneTestSignal != null && usageRecord.SystemTwoTestSignal != null)
                                        {
                                            <text>S1：</text>
                                            @Html.DisplayFor(item => usageRecord.SystemOneTestSignal)
                                            <br />
                                            <text>S2：</text>
                                            @Html.DisplayFor(item => usageRecord.SystemTwoTestSignal)
                                        }
                                        else
                                        {
                                            @Html.DisplayFor(item => usageRecord.SystemOneTestSignal)
                                        }
                                    </td>
                                    <td class="remark">@Html.DisplayFor(item => usageRecord.Remark)</td>
                                    <td class="operator">@Html.DisplayFor(item => usageRecord.Operator)</td>
                                    <td class="button">
                                        <button class="edit-btn btn btn-sm btn-outline-primary" data-id="@usageRecord.Id">编辑</button>
                                        <button class="delete-usage-record-btn btn btn-sm btn-outline-danger" data-id="@usageRecord.Id">删除</button>
                                    </td>
                                </tr>
                                @* update-row *@
                                <tr class="update-row">
                                    <td>
                                        <input form="edit-form" type="hidden" asp-for="@usageRecord.Id" disabled />
                                        <input form="edit-form" type="hidden" asp-for="@usageRecord.InstrumentId" disabled />
                                        <input form="edit-form" asp-for="@usageRecord.BeginTime" required disabled />
                                    </td>
                                    <td>
                                        <input form="edit-form" asp-for="@usageRecord.EndTime" disabled />
                                    </td>
                                    <td>
                                        <select form="edit-form" asp-for="@usageRecord.ProjectName" asp-items="@Model.ProjectsSelectList" disabled></select>
                                    </td>
                                    <td>
                                        <input form="edit-form" min="0" step="1" asp-for="@usageRecord.SampleNumber" disabled />
                                    </td>
                                    <td>
                                        <input form="edit-form" min="0" step="1" asp-for="@usageRecord.SystemOneBatchNumber" placeholder="S1" disabled />
                                        <br />
                                        <input form="edit-form" min="0" step="1" asp-for="@usageRecord.SystemTwoBatchNumber" placeholder="S2" disabled />
                                    </td>
                                    <td>
                                        <input form="edit-form" type="number" step="any" asp-for="@usageRecord.LowVacuumDegree" placeholder="低真空" disabled />
                                        <select form="edit-form" asp-for="@usageRecord.LowVacuumDegreeUnit" disabled>
                                            <option value="e-5 torr">e-5 torr</option>
                                            <option value="e-6 torr">e-6 torr</option>
                                            <option value="e+2 Pa">e+2 Pa</option>
                                            <option value="e+1 Pa">e+1 Pa</option>
                                            <option value="e-3 Pa">e-3 Pa</option>
                                            <option value="e-4 Pa">e-4 Pa</option>
                                        </select>
                                        <br />
                                        <input form="edit-form" type="number" step="any" asp-for="@usageRecord.HighVacuumDegree" placeholder="高真空" disabled />
                                        <select form="edit-form" asp-for="@usageRecord.HighVacuumDegreeUnit" disabled>
                                            <option value="e-5 torr">e-5 torr</option>
                                            <option value="e-6 torr">e-6 torr</option>
                                            <option value="e+2 Pa">e+2 Pa</option>
                                            <option value="e+1 Pa">e+1 Pa</option>
                                            <option value="e-3 Pa">e-3 Pa</option>
                                            <option value="e-4 Pa">e-4 Pa</option>
                                        </select>
                                    </td>
                                    <td>
                                        <input form="edit-form" asp-for="@usageRecord.SystemOneColumnNumber" placeholder="S1编号" disabled />
                                        <input form="edit-form" type="number" min="0" step="any" asp-for="@usageRecord.SystemOneColumnPressure" placeholder="S1压力" disabled />
                                        <select form="edit-form" asp-for="@usageRecord.SystemOneColumnPressureUnit" disabled>
                                            <option value="Mpa">Mpa</option>
                                            <option value="Kpa">Kpa</option>
                                            <option value="Bar">Bar</option>
                                            <option value="Psi">Psi</option>
                                        </select>
                                        <br />
                                        <input form="edit-form" asp-for="@usageRecord.SystemTwoColumnNumber" placeholder="S2编号" disabled />
                                        <input form="edit-form" type="number" min="0" step="any" asp-for="@usageRecord.SystemTwoColumnPressure" placeholder="S2压力" disabled />
                                        <select form="edit-form" asp-for="@usageRecord.SystemTwoColumnPressureUnit" disabled>
                                            <option value="Mpa">Mpa</option>
                                            <option value="Kpa">Kpa</option>
                                            <option value="Bar">Bar</option>
                                            <option value="Psi">Psi</option>
                                        </select>
                                    </td>
                                    <td>
                                        <input form="edit-form" asp-for="@usageRecord.SystemTwoColumnPressureUnit"
                                               pattern="^[+-]?[\d]+([\.][\d]+)?([Ee][+-]?[\d]+)?$"
                                               title="请使用科学计数法，例：3.1e+05，如果是N/A的话不需要输入。"
                                               disabled />
                                    </td>
                                    <td>
                                        <input form="edit-form" asp-for="@usageRecord.SystemOneTestSignal"
                                               placeholder="S1"
                                               pattern="^[+-]?[\d]+([\.][\d]+)?([Ee][+-]?[\d]+)?$"
                                               title="请使用科学计数法，例：3.1e+05，如果是N/A的话不需要输入。"
                                               disabled />
                                        <br />
                                        <input form="edit-form" asp-for="@usageRecord.SystemTwoColumnPressureUnit"
                                               placeholder="S2"
                                               pattern="^[+-]?[\d]+([\.][\d]+)?([Ee][+-]?[\d]+)?$"
                                               title="请使用科学计数法，例：3.1e+05，如果是N/A的话不需要输入。"
                                               disabled />
                                    </td>
                                    <td>
                                        <textarea form="edit-form" asp-for="@usageRecord.SystemOneTestSignal" disabled></textarea>
                                    </td>
                                    <td>
                                        <input form="edit-form" asp-for="@usageRecord.BlankSignal" disabled required />
                                    </td>
                                    <td class="button">
                                        <button class="update-btn btn btn-sm btn-success" form="edit-form" disabled>保存</button>
                                        <button class="cancel-btn btn btn-sm btn-secondary" disabled>取消</button>
                                    </td>
                                </tr>
                            }
                            @* create-row *@
                            <tr id="create-row">
                                <td>
                                    <input form="create-form" asp-for="UsageRecord.InstrumentId" type="hidden" />
                                    <input form="create-form" asp-for="UsageRecord.BeginTime" value="@DateTime.Now.ToString("yyyy-MM-ddTHH:mm")" required />
                                </td>
                                <td>
                                    <input form="create-form" asp-for="UsageRecord.EndTime" />
                                </td>
                                <td>
                                    <select id="select-project" form="create-form" asp-for="UsageRecord.ProjectName" asp-items="@Model.ProjectsSelectList">
                                    </select>
                                </td>
                                <td>
                                    <input form="create-form" min="0" step="1" asp-for="UsageRecord.SampleNumber" />
                                </td>
                                <td>
                                    <input form="create-form" min="0" step="1" asp-for="UsageRecord.SystemOneBatchNumber" placeholder="S1" />
                                    <br />
                                    <input form="create-form" min="0" step="1" asp-for="UsageRecord.SystemTwoBatchNumber" placeholder="S2" />
                                </td>
                                <td>
                                    <input form="create-form" type="number" min="0" step="any" asp-for="UsageRecord.LowVacuumDegree" placeholder="低真空" />
                                    <select form="create-form" asp-for="UsageRecord.LowVacuumDegreeUnit">
                                        <option value="e-5 torr">e-5 torr</option>
                                        <option value="e-6 torr">e-6 torr</option>
                                        <option value="e+2 Pa">e+2 Pa</option>
                                        <option value="e+1 Pa">e+1 Pa</option>
                                        <option value="e-3 Pa">e-3 Pa</option>
                                        <option value="e-4 Pa">e-4 Pa</option>
                                    </select>
                                    <br />
                                    <input form="create-form" type="number" min="0" step="any" asp-for="UsageRecord.HighVacuumDegree" placeholder="高真空" />
                                    <select form="create-form" asp-for="UsageRecord.HighVacuumDegreeUnit">
                                        <option value="e-5 torr">e-5 torr</option>
                                        <option value="e-6 torr">e-6 torr</option>
                                        <option value="e+2 Pa">e+2 Pa</option>
                                        <option value="e+1 Pa">e+1 Pa</option>
                                        <option value="e-3 Pa">e-3 Pa</option>
                                        <option value="e-4 Pa">e-4 Pa</option>
                                    </select>
                                </td>
                                <td>
                                    <input form="create-form" asp-for="UsageRecord.SystemOneColumnNumber" placeholder="S1编号" />
                                    <input form="create-form" type="number" min="0" step="any" asp-for="UsageRecord.SystemOneColumnPressure" placeholder="S1压力" />
                                    <select form="create-form" asp-for="UsageRecord.SystemOneColumnPressureUnit">
                                        <option value="Mpa">Mpa</option>
                                        <option value="Kpa">Kpa</option>
                                        <option value="Bar">Bar</option>
                                        <option value="Psi">Psi</option>
                                    </select>
                                    <br />
                                    <input form="create-form" asp-for="UsageRecord.SystemTwoColumnNumber" placeholder="S2编号" />
                                    <input form="create-form" type="number" min="0" step="any" asp-for="UsageRecord.SystemTwoColumnPressure" placeholder="S2压力" />
                                    <select form="create-form" asp-for="UsageRecord.SystemTwoColumnPressureUnit">
                                        <option value="Mpa">Mpa</option>
                                        <option value="Kpa">Kpa</option>
                                        <option value="Bar">Bar</option>
                                        <option value="Psi">Psi</option>
                                    </select>
                                </td>
                                <td>
                                    <input form="create-form" asp-for="UsageRecord.BlankSignal"
                                           pattern="^[+-]?[\d]+([\.][\d]+)?([Ee][+-]?[\d]+)?$"
                                           title="请使用科学计数法，例：3.1e+05，如果是N/A的话不需要输入。" />
                                </td>
                                <td>
                                    <input form="create-form" asp-for="UsageRecord.SystemOneTestSignal"
                                           placeholder="S1"
                                           pattern="^[+-]?[\d]+([\.][\d]+)?([Ee][+-]?[\d]+)?$"
                                           title="请使用科学计数法，例：3.1e+05，如果是N/A的话不需要输入。" />
                                    <br />
                                    <input form="create-form" asp-for="UsageRecord.SystemTwoTestSignal"
                                           placeholder="S2"
                                           pattern="^[+-]?[\d]+([\.][\d]+)?([Ee][+-]?[\d]+)?$"
                                           title="请使用科学计数法，例：3.1e+05，如果是N/A的话不需要输入。" />
                                </td>
                                <td>
                                    <textarea form="create-form" asp-for="UsageRecord.Remark"></textarea>
                                </td>
                                <td>
                                    <input form="create-form" asp-for="UsageRecord.Operator" required />
                                </td>
                                <td>
                                    <button form="create-form" id="create-btn" class="btn btn-primary">新建</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <h6>备注：</h6>
                    <ol>
                        <li>单系统仪器填写S1对应的输入框；</li>
                        <li>真空度单位，色谱柱编号、单位自动预设为上一次填写的值；</li>
                    </ol>
                    <audit-trail logs="Model.UsageAuditTrailLogs" modal-id="usageAuditTrailLog"></audit-trail>
                </div>
            }
        </div>
    </div>
</div>

<form id="create-form" method="post" asp-page="UsageRecords/Create">
</form>
<form id="edit-form" method="post" asp-page="UsageRecords/Edit">
</form>
<form id="delete-form" method="post" asp-page="UsageRecords/Delete">
</form>
<link rel="stylesheet" href="~/css/Record.css" asp-append-version="true">

@section Scripts {
    <script src="~/js/Records.js" asp-append-version="true"></script>
    <script>
        function createReport() {
            document.title = "@(Model.Search.Instrument)_@(Model.Search.Date.ToString("yyyyMM"))_记录表";
            window.print();
            document.title = "设备管理平台";
        }

        $("td.days").on("click", function () {
            let id = $(this).attr("data-id");
            console.log(id);
        })
    </script>
}
